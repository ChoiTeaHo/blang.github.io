---
title:  "라즈베리파이(8) 웹서버 인코딩"
excerpt: "라즈베리파이(8) 웹서버 인코딩"
categories:
  - web-service-dev
tags:
  - [web, dev]
toc: true
toc_sticky: true

last_modified_at: 2022-10-12T20:00:00-05:00
---

# 라즈베리파이 웹서버 서버인코딩
## 웹서버 서버인코딩 개요
  : 라즈베리파이에 설치한 웹서버의 기본 index,html 문서를 열어보니 한글이 깨진다. 해당 내용은 서버인코딩이 문제일때 기준으로 작성하였다.

### 한글깨짐 원인
  : 현재 인코딩을 파악해본다. (`파일인코딩` 과 `서버인코딩` 이 동일해야한다.)


1. 파일인코딩
  : 한글 출력이 가능한 utf-8 이므로 정상이다.

    ```bash
    # 파일인코딩 확인  
    wasadm@cddawso1:/$ file -bi /fswas/apache/httpd/htdocs/index.html 
    text/html; charset=utf-8
  
    ```

2. 서버인코딩
  : 한글 출력이 불가능한  (영어,영국) en_GB.UTF-8 인코딩이다.

    ```bash
    # 서버인코딩 확인(1)
    wasadm@cddawso1:/ $ echo $LANG
    en_GB.UTF-8

    # 서버인코딩 확인(2)
    wasadm@cddawso1:/ $ locale
    LANG=en_GB.UTF-8

    ```

### 웹서버 서버인코딩 변경
  : 정상출력을 위해 `서버인코딩` 을 파일인코딩과 똑같이 `KR.UTF-8` 으로 변경해본다.

```bash
# 1. 로케일 재설치 명령어 수행
apt-get install --reinstall locales && sudo dpkg-reconfigure locales
install --reinstall  # 재설치
dpkg-reconfigure     # 이미 설치된 패키지를 재설정한다.

# 2. GUI가 나오면 `ko.KR.UTF-8 UTF-8` 을 선택

# 3. 저장

```

다시 서버인코딩이 변경되었는지 확인해보고 웹서버에 접속해보면 한글이 정상적으로 출력함을 알 수있다.










### Apache 웹서버 수동설치 (소스컴파일 방식)
  : 소스컴파일방식의 수동설치를 진행한다.

  ```bash
  # 기본적인 소스 컴파일방식 설치방법은 다음과 같다.

  미리 소스파일준비        # 공홈에서 패키지소스를 다운받고 서버에 올려둔다.
  /configure           # 소스 구성이다. 소스파일에 대한 환경설정을 해주는 명령어다. (뒤에 옵션을 넣음) 서버환경에 맞추어 makefile을 생성해주는 과정이다.
  /configure --prefix  # prefix가 있으면 경로를 지정할 수 있다.
  make                 # 소스컴파일이다. 소스를 컴파일 하는 것이다. 컴파일이란 소스파일을 사용자가 실행 가능한 파일로 만들어 주는 과정을 말한다.
  make install         # 설치한다. make를 통해 만들어진 설치파일을 설치하는 과정이다. 한마디로 build된 프로그램을 실행할 수 있게 파일들을 알맞은 위치에다가 복사를 한다.
  
  ```

  **참고) 아파치 소스설치 주의사항**  
  앞으로 httpd-2.4.X 버전부터는 apr과 apr-util, pcre 라는 의존성 패키지를 별도로 설치하여야 apache 설치가 완료된다고 한다.  
  apr -> util -> pcre -> 아파치 순으로 설치해야한다.
  {: .notice--info }
  

1. 선행 컴파일 관련 패키지를 설치
  : 컴파일 관련하여 아래 패키지들이 필수라고 한다. 아래 명령어로 설치한다.

    ```bash
    sudo apt-get update && sudo apt-get upgrade  #패키지 업데이트 선행

    apt-get install gcc
    apt-get install libexpat1-dev
    apt-get install g++
    apt-get install libexpat-dev

    ```

2. 아파치 수동설치 경로 정하기
  : 아파치 및 관련 패키지 설치 경로를 미리 정한다.

    ```bash 
    mkdir /fswas/install  # 다운받은 원본 패키지를 넣는 공간
    mkdir /fswas/apache   # 아파치를 최종으로 설치할공간
    mkdir /fswas/apache/apr       # 아파치 의존성패키지 설치할 공간
    mkdir /fswas/apache/apr-util  # 아파치 의존성패키지 설치할 공간
    mkdir /fswas/apache/pcre      # 아파치 의존성패키지 설치할 공간

    ```

