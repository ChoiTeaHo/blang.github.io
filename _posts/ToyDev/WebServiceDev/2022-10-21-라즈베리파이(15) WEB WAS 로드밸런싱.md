---
title:  "라즈베리파이(14) WEB WAS 연동"
excerpt: "라즈베리파이(14) WEB WAS 연동 입니다."
categories:
  - web-service-dev
tags:
  - [web, dev]
toc: true
toc_sticky: true

last_modified_at: 2022-10-12T20:00:00-05:00
---

# 라즈베리파이 WEB WAS 로드밸런싱
## 로드밸런싱 개요
  : 라즈베리파이에 Apache & Tomcat서버를 로드밸런싱 한다.

  - 1대의 웹서버를 바라보는 WAS서버 2대를 구성한다.
  - 물리적으로 서버를 분리하여 부하를 줄인다.
  - mod_jk의 load balancing방식은 기본적으로 round robin이지만 한번 왔던 요청은 같은 Engine에 보내준다.


## 연동 종류
  : 다양한 연동방법이 존재했다. 나는 mod_jk 를 이용한 연동방식으로 진행한다. mod_proxy는 AJP 같은 특정 프로토콜에 의존하지 않고, 설정이 간편하며, 성능상 우위를 점하고 있지만, mod_jk를 이용한 방식이 전통적으로 널리 쓰이고 있기에 선택했다.

- 종류
  - Tomcat Connector를 이용한 mod_jk 연동 (AJP)
  - mod_proxy를 이용한 reverse proxy 기능으로 연동 (Proxy 개념 필요)
  - mod_proxy_ajp를 이용한 AJP를 reverse proxy로 사용해서 연동 (기존의 2가지 방법 모두 개념이 필요함)


> **mod_jk 모듈이란?**  
> AJP프로토콜을 사용하여 톰캣과 연동하기 위해 만들어진 모듈이다.  
> 아파치에 들어온 요청 중 톰캣이 처리할 요청을 AJP 포트(일반적으로 8009)를 통해 톰캣에 전달하고 그에 대한 응답을 받는 역할을 수행한다.
> mod_jk는 톰캣에서 배포되므로 톰캣 홈페이지에서 tomcat-connector 이라는 파일로 다운 받을 수 있다.  
> 참고로 mod_jk는 아파치 웹서버에 설치해주어야 한다.
