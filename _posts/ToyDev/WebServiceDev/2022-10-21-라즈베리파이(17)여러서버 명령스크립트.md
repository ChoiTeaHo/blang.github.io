---
title:  "라즈베리파이(17) 여러서버 명령스크립트"
excerpt: "라즈베리파이(17) 여러서버 명령스크립트 입니다."
categories:
  - web-service-dev
tags:
  - [web, dev]
toc: true
toc_sticky: true

last_modified_at: 2022-10-12T20:00:00-05:00
---

# 라즈베리파이 여러서버 명령스크립트
## ssh 개요
  : 라즈베리파이에 구축한 Apache 1대 & Tomcat 2대 서버로 한번에 명령어를 수행한다.

> ***ssh 명령어***  
> 다른 서버로 붙을 수 있는 명령어.  
> 현재 나도 스마트폰 ssh로 각 서버에 붙어서 작업하고 있으며, 이번에는 스마트폰을 통해 붙은 리눅스 안에서 다시 ssh 명령어를 수행하는 차이일뿐 기능의 본질은 똑같다. 

/sshd
{: .notice--info}


## ssh 스크립트
  : 여러 서버에 ssh 명령어를 나열한 스크립트를 생성한다.

### WEB서버
  : 여러 서버를 핸들링할 서버에서 스크립트 생성. 나는 web서버로 결정했기에 아래처럼 작성한다.

  ```bash
  # 여러서버들을 핸들하고싶은 특정서버에다가 생성
  vi ~/script/dbd/server_hostname.sh
  
  #!/bin/bash
  echo "웹1.... >>>"  
  sudo ssh wasadm@blang.co.kr -p [웹서버포트] sudo hostname -I  

  echo "와스2.... >>>"  
  sudo ssh wasadm@blang.co.kr -p [와스1서버포트] sudo hostname -I  

  echo "와스1.... >>>"  
  sudo ssh dbd000@blang.co.kr -p [와스2서버포트] sudo hostname -I  

  ```

### WAS서버1
  : WEB 서버에서 핸들링당하는 WAS1 서버이다. 

  1. ssh 권한부여
  2. 목적에 맞는 스크립트 생성.

  ```bash
  sudo vi /etc/sudoers

  # User privilege specification
  root        ALL=(ALL:ALL) ALL
  WAS1서버계정  ALL=(ALL:ALL) ALL  #권한부여 추가

  ```

### WAS서버1
  : WEB 서버에서 핸들링당하는 WAS2 서버이다. 

  1. ssh 권한부여
  2. 목적에 맞는 스크립트 생성.

  ```bash
  sudo vi /etc/sudoers

  # User privilege specification
  root        ALL=(ALL:ALL) ALL
  WAS2서버계정  ALL=(ALL:ALL) ALL  #권한부여 추가

  ```

### 테스트
  : 테스트 해본다.
  
  ```bash
  ```

### 세션클러스터링 적용완료

> 톰캣을 이용한 로드밸런싱과 세션 클러스터링에 대해서 알아보았다. 
> 일반적으로 로드밸런싱과 클러스터링은 성능 향상이라는 측면과 안정성 확보에 그 목적을 가지고 있다.
> 물론 고가의 상용 웹 어플리케이션 서버에 비하면 많이 부족하고 
> 하드웨어를 이용한 로드밸런싱과 클러스터링에 비하면 안정성이 떨어질 수도 있지만 
> 저렴한 비용으로 최대의 안정성과 성능을 얻고자 한다면 한번쯤 시도해 볼만한 좋은 기능이라고 할 수 있다.
