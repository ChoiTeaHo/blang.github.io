---
title:  "라즈베리파이(9) 웹서버 DNS 구매와 적용"
excerpt: "라즈베리파이(9) 웹서버 DNS 구매와 적용"
categories:
  - web-service-dev
tags:
  - [web, dev]
toc: true
toc_sticky: true

last_modified_at: 2022-10-12T20:00:00-05:00
---

# 라즈베리파이 웹서버 DNS
## DNS 개요
  : 말로만 들었던 DNS를 직접 적용해보고 싶어서 작성한 문서이다. iptime 에서 제공하는 DNS는 `iptime.org` 으로 강제하기때문에 내가 원하는 주소로 만들지 못한다. 개인적으로 주소에 blang 단어를 넣고 싶었는데 .com 은 이미 선점되어 있었다. (역시..ㅎ) 그나마 국내에서 유명한 co.kr 은 소유자가 없어서 이 주소로 픽했다.

## DNS 업체 선정
  : DNS 를 제공해주는 업체도 다양했다. 리서치 해보니 그나마 대중적인 도메인 업체마다 특징이 있는듯 하다.

  1. 닷홈: 환불안해줌
  2. 가비안: 비싸지만 고객센터가 잘되어 있음
  3. Cafe24: 오래된 업체
  4. 후이즈: 장기등록시 할인률 높음
  5. 블루웹: 비싸보이는데 꽤 이용하는듯 하다..?
  6. 호스팅케이알: 저렴하고 많이 이용하는듯 함

이중 호스팅케이알이 저렴하고 대중적으로 보여 이곳으로 선택했다.
홈페이지 최하단에 footer 에 업체명이 메가존(주) 라고 적혀있었는데 내가 들어본 회사였다.
최근 트렌드에 맞춰서 AWS 서비스를 해주는 큰 규모의 회사!..

## DNS 등록
### DNS 구매
  : 구매는 3스텝으로 이루어져 있다. 도메인 1년 가격이 9800원으로 저렴한데 추가로 `도메인 개인정보보호` 라는 옵션이 있었다. 리서치를 해보니 이 기능이 없으면 정보를 수집해서 도메인 관련한 광고메일이 오거나 모르는 사람에게 질문 전화가 온다고도 한다. 우선 1년만 구매해본다.

  1. 장바구니 담기  
    : 앞서 말했듯 나는 `도메인개인정보` 신청도 체크했다.

  2. 등록결제  
    : 개인정보를 입력하고 `네임서버 정보` 란을 입력한다.

      ```
      # 호스팅케이알 네임서버를 입력한다.
      1차 네임서버 입력 ==> (ns1.hosting.co.kr)  
      2차 네임서버 입력 ==> (ns2.hosting.co.kr)

      ````

  3. 결제완료

  
  > **1차,2차 네임서버 입력란의 의미**  
  > 간단한 3스텝인데 네임서버 기입란이 헷갈려서 오랬동안 멍때렸다..  네임서버1차,2차 란에 내 iptime 공유기주소와 cafe24 네임서버주소를 넣었기 때문이다. 내가 착각한 부분은 호스팅하려는 라즈베리파이 주소 기입란이 없어서 이곳이 리다이랙트되는 호스팅 대상주소를 설정하여 넣는곳이라고 생각했나보다.. iptime의 ddns 를 적으면 어떤 의미가 되냐면 `iptime내부의 구축된 dns서버의 기능으로 찾겠다` 라는 의미가 된다..  
  > * 호스팅케이알 이라는 업체의 도메인서비스를 이용하므로 호스팅케이알의 네임서버를 입력해야한다.  
  > * 이 호스팅케이알 사의 내가 호스팅하려는 서버의 주소를 설정하는 네임서버 편집은 이후 진행한다. (CNAME, ANAME 등..)  

### DNS 연결정보 설정
  : 구매, 네임서버설정을 끝내면 마지막으로 `호스팅대상서버의 연결정보` 를 설정을 해주면 된다.

  나는 Ip가아닌 iptime의 ddns주소를 도메인이 바라보는 주소로 잡을것이다. 이유는 다음과같다.
  {: .notice--info }

  1. 개인 서버에서 일반적인 인터넷 회선을 사용할 경우에는 (통상) 고정 IP를 사용할 수 없다.  
    : 이에 사람들은 그냥 단순하게 `A레코드` 를 사용하기에는 제약사항이 있었고, 그것을 조금이라도 편리하게 해보고자 많은 꼼수가 있었다.

  2. 인터넷 회선 업체에서 강제로 DHCP 서버를 리셋해버리면 다시 IP주소가 바뀌어버린다.  
    : 이게 언제 일어날지 아무도 모른다. 그래서 우린 DDNS 를 앞서 설정했었고 이용하고 있었다.

이러한 이유로 공유기에서 제공하는 DDNS 주소를 CNAME으로 연결하면 상당히 합리적인 좋은 방법일것이다. (갑자기 공인IP가 변경되어도 잡아주기때문!)  
그래서 내 iptime 공유기 처럼 DDNS를 자체적으로 지원하는 공유기가 필요하다. (요즘 다 제공한다ㅎ) 그 이유는 별다른 프로그램 설치가 필요없으며, 공유기 자체에서 지원을 하기 때문에 근본적인 IP변경에 대해 즉각적으로 반응하기 때문이다.
현재 사용하는 네임서버 연결방법이나 일부 호스팅업체에서 연결 레코드로 제공하는 레코드가 A레코드 뿐아니라 CNAME 레코드도 제공을 하는데 이런 이유에서 제공이 되는구나 라는 생각이 든다.


## 레코드
### CNAME 레코드
  : 개인 도메인 네임서버에 'URL주소' 를 등록하여 연결하는 레코드

```bash
ex) www.test.com

```

### ANAME 레코드
  : 개인 도메인 네임서버에 '아이피(IP)' 를 등록하여 연결하는 레코드. (도메인 연결에서 일반적으로 많이 사용하는 레코드는 A 레코드 이다.)

```bash
ex) 52.448.398.72

```

### A레코드를 사용하지 않고 CNAME을 사용하는 이유는?
  : A레코드를 사용할 경우 네임서버(DNS)에 해당서버(특정 사이트) 아이피를 기본적으로 입력해야 한다. 그런데 피치 못할 경우에 아이피가 변경되는 경우가 생긴다. 그런경우 A레코드에 설정한 네임서버(DNS)아이피를 부득이하게 변경을 해야 할것이다. 

즉, 가정용 iptime 공유기의 ddns를 주소로 서버를 사용하는 나에게는 CNAME 레코드가 적합한 DNS 연결 방법이다.
{: .notice--info }


## 정리
  : 정리하면 다음과 같다.

  1. 호스팅케이알에서 도메인을(blang.co.kr) 구매한다.
  2. 호스팅케이알에서 구매하는 시점에 네임서버를 입력한다. ==> ns1.hosting.co.kr 이라는 네임서버(도메인업체 네임서버)로 지정.
  3. 지정했으니 내 라즈베리파이 연결정보를 설정한다. 해당 네임서버(도메인업체)에 CNAME 레코드를 추가하는 방법으로 구현한다. (웹에서 CNAME, ANME 등을 수정할 수 있도록 제공한다.)


