---
title:  "JS JSON 핸들링"
excerpt: "JS JSON 핸들링 입니다."

categories:
  - html-css-js-jquery
tags:
  - [HTML,CSS,JS,jquery]

toc: true
toc_sticky: true

last_modified_at: 2022-08-09T20:00:00-05:00
---


## JSON 핸들링
### JSON 형태
```json
{
    "documnet": [
        {
            "msg": "성공",
            "result": [
                "data1",
                "data2"
            ],
            "address": [
                {
                    "data2": "데이터2의 값 홍길동주소",
                    "data1": "데이터1의 값 홍길동"
                },
                {
                    "data2": "데이터2의 값 박명수주소",
                    "data1": "데이터1의 값 박명수"
                }
            ],
            "language": [
                {
                    "언어": "일본어",
                    "언어2": "카타카나",
                    "언어1": "히라가나"
                },
                {
                    "언어": "중국어",
                    "언어2": "번체",
                    "언어1": "간체"
                }
            ],
            "status": 200
        }
    ],
    "etc": {
        "name": "기타"
    }
}

```
  
## (JSP 처리) EL  
### (JSON) JSON형태 String 조작 👎❌
```java
/* java (백앤드) */
String strJsonStr = 
	    "{" +
	    "  \"documnet\": [" +
	    "    {" +
	    "      \"status\": 200," +
	    "      \"msg\": \"성공\"," +
	    "      \"result\": [" +
	    "        \"data1\"," +
	    "        \"data2\"" +
	    "      ]," +
	    "      \"address\": [" +
	    "        {" +
	    "          \"data2\": \"데이터2의 값 홍길동주소\"," +
	    "          \"data1\": \"데이터1의 값 홍길동\"" +
	    "        }," +
	    "        {" +
	    "          \"data2\": \"데이터2의 값 박명수주소\"," +
	    "          \"data1\": \"데이터1의 값 박명수\"" +
	    "        }" +
	    "      ]," +
	    "      \"language\": [" +
	    "        {" +
	    "          \"언어\": \"일본어\"," +
	    "          \"언어2\": \"카타카나\"," +
	    "          \"언어1\": \"히라가나\"" +
	    "        }," +
	    "        {" +
	    "          \"언어\": \"중국어\"," +
	    "          \"언어2\": \"번체\"," +
	    "          \"언어1\": \"간체\"" +
	    "        }" +
	    "      ]" +
	    "    }" +
	    "  ]," +
	    "  \"etc\": {" +
	    "    \"name\": \"기타\"" +
	    "  }" +
	    "}";

	SONObject jsonObject = new JSONObject(strJsonStr);
	SONObject etcObject = jsonObject.getJSONObject("etc");
	tring etc = etcObject.getString("name");
	ystem.out.println(etc);

	odel.addAttribute("type0", strJsonStr);

```

```jsp
<!-- JSP (프론트) -->
<!-- String (for Perfect ORIGNAL JSON) -->
<h3><i>완전한 json 문자열 전달</i></h3>
<ul>
<li><b>JSON String: </b> ${type0}</li>
<%-- type0 변수에 저장된 JSON 문자열을 EL을 사용하여 받아옴 --%>

<%
	String strJson = (String) request.getAttribute("type0");
	JSONObject jsonObject = new JSONObject(strJson);
	JSONObject etcObject = jsonObject.getJSONObject("etc");
	String etc = etcObject.getString("name");
	System.out.println("etc: " + etc);
	
%>
<li><b>etc : </b> ${etc}</li>

```
> ❗<span style='color:green'><b><I>***JSON을 EL로 표현하는것은 사용하지말자...***</I></b></span>  
> 💡내부 엔진의 문제인듯 하다. 이 방법으로 절대 시간 소비하지말자 ... 꼭.. 서버에서 처리하자..
>    
> ❗<span style='color:green'><b><I>***챗GPT 답변***</I></b></span>  
> 1. JSP 문법 오류: JSP 코드 내에서 ${}로 값을 가져오는 부분에 문법적인 오류가 있는지 확인해야 합니다. <% %> 스크립트릿과 EL 표현식을 혼합해서 사용하면 문제가 발생할 수 있습니다.
>     - ❌ 해당되지 않는다. System.out.println("etc: " + etc); 출력되었기에.. 
> 2. etc 변수가 null이거나 값이 없는 경우: ${etc}로 값을 출력하려면 etc 변수가 올바르게 값을 가지고 있어야 합니다. System.out.println("etc: " + etc);가 출력되어도, 변수 값이 null이거나 비어있다면 출력되지 않을 수 있습니다.
>     - ❌ 해당되지 않는다. String etc 정의가 되었으니까 출력되었겠지.
> 3. JSP 컨테이너 설정: 일부 경우에는 JSP 컨테이너 설정이나 JSP 엔진의 동작 방식에 의해 EL 표현식이 올바르게 해석되지 않을 수 있습니다. 이 경우에는 JSP 컨테이너의 로그를 확인하거나 컨테이너 설정을 검토해야 할 수 있습니다.
>     - 🤔 이부분으 의심되지만 확인하기 어렵다.



### (JSON) List, Map 객체 조작 👍

```java
/* java (백앤드) */

String strJsonStr = "[제이슨 형태 데이터]";

Gson gson = new Gson();
TestDTO testDto = new TestDTO();
testDto = gson.fromJson(strJsonStr, TestDTO.class);

// document (배열)
List<Map<String, Object>> documnet = testDto.getDocumnet();

// etc (기본)
List<Map<String, Object>> type1 = testDto.getDocumnet();
Map<String, Object> type2 = testDto.getEtc();

model.addAttribute("type1", documnet);
model.addAttribute("type2", etc);

```
  
```html
<!-- JSP (프론트) -->

<!-- List<Map<String, Object>> -->
<h3><i>document 전달</i></h3>
<c:forEach var="item" items="${type1}">
    <ul>
    	<li><b>document 객체: </b> ${type1}</li>
    	<li><b>status: </b> ${item.status}</li>
        <li><b>msg: </b> ${item.msg}</li>
        <li><b>result: </b> ${item.result}</li>
        <li><b>address: </b> ${item.address}</li>
        <c:forEach var="address" items="${item.address}">
        	<ul>
        	<li><b>data1(key): </b> ${address.data1}</li>
        	<li><b>data2(key): </b> ${address.data1}</li>
        	</ul>	
        </c:forEach>
        <li><b>language(한글EL불가):</b> ${item.language}</li>
    </ul>
</c:forEach>
<hr>

<!-- Map<String, Object> -->
<h3><i>etc 전달</i></h3>
<ul>
<li><b>etc 객체: </b> ${type2}</li>
<p>name: ${type2.name}</p>
</ul>
<hr>

```

## (JSP 처리) Script 
### (JSON) JSON형태 String 조작 👍

```java
/* java (백앤드) */

String strJsonStr = "[제이슨 형태 데이터]";
model.addAttribute("type0", strJsonStr);

```
  
```jsp
// jsp (프론트)

<script>
$(document).ready(function (){
	
	// 온로드시 백앤드에서 전달받은 JSON 처리
	type0 = '${type0}'; // Original JSON String
	var parsedData = JSON.parse(type0);
	
	var stastus = parsedData.documnet[0].status;
	var msg = parsedData.documnet[0].msg;
	var address = parsedData.documnet[0].address[0].data1;
	var language = parsedData.documnet[0].language[0].언어;
});
</script>

```
> ❗<span style='color:green'><b><I>***설명***</I></b></span>  
> 💡 JSON 형태가 완전하면 JSP 에서 조작이 가능하다.  
> 💡 즉, JSON.parse(); 함수가 가능해진다.

### (JSON) List, Map 객체 조작 (작성중)
> ❗<span style='color:green'><b><I>***작성중***</I></b></span>  