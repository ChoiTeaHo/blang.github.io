---
title:  "JS 클로저"
excerpt: "JS 클로저 입니다."

categories:
  - html-css-js-jquery
tags:
  - [HTML,CSS,JS,jquery]

toc: true
toc_sticky: true

last_modified_at: 2022-09-25T20:00:00-05:00
---

## JSON 핸들링
### JSON 형태
```json
{
    "documnet": [
        {
            "msg": "성공",
            "result": [
                "data1",
                "data2"
            ],
            "address": [
                {
                    "data2": "데이터2의 값 홍길동주소",
                    "data1": "데이터1의 값 홍길동"
                },
                {
                    "data2": "데이터2의 값 박명수주소",
                    "data1": "데이터1의 값 박명수"
                }
            ],
            "language": [
                {
                    "언어": "일본어",
                    "언어2": "카타카나",
                    "언어1": "히라가나"
                },
                {
                    "언어": "중국어",
                    "언어2": "번체",
                    "언어1": "간체"
                }
            ],
            "status": 200
        }
    ],
    "etc": {
        "name": "기타"
    }
}

```
  
### EL  

```java
/* java (백앤드) */

String strJsonStr = "[제이슨 형태 데이터]";

Gson gson = new Gson();
TestDTO testDto = new TestDTO();
testDto = gson.fromJson(strJsonStr, TestDTO.class);

// document (배열)
List<Map<String, Object>> documnet = testDto.getDocumnet();

// etc (기본)
List<Map<String, Object>> type1 = testDto.getDocumnet();
Map<String, Object> type2 = testDto.getEtc();

model.addAttribute("type1", documnet);
model.addAttribute("type2", etc);

```
  
```html
<!-- JSP (프론트) -->

<!-- List<Map<String, Object>> -->
<h3><i>document 전달</i></h3>
<c:forEach var="item" items="${type1}">
    <ul>
    	<li><b>document 객체: </b> ${type1}</li>
    	<li><b>status: </b> ${item.status}</li>
        <li><b>msg: </b> ${item.msg}</li>
        <li><b>result: </b> ${item.result}</li>
        <li><b>address: </b> ${item.address}</li>
        <c:forEach var="address" items="${item.address}">
        	<ul>
        	<li><b>data1(key): </b> ${address.data1}</li>
        	<li><b>data2(key): </b> ${address.data1}</li>
        	</ul>	
        </c:forEach>
        <li><b>language(한글EL불가):</b> ${item.language}</li>
    </ul>
</c:forEach>
<hr>

<!-- Map<String, Object> -->
<h3><i>etc 전달</i></h3>
<ul>
<li><b>etc 객체: </b> ${type2}</li>
<p>name: ${type2.name}</p>
</ul>
<hr>

```

### Script
### JSON 객체 DOM 조작 

```java
/* java (백앤드) */

String strJsonStr = "[제이슨 형태 데이터]";
model.addAttribute("type0", strJsonStr);

```
  
```jsp
// jsp (프론트)

<script>
$(document).ready(function (){
	
	// 온로드시 백앤드에서 전달받은 JSON 처리
	type0 = '${type0}'; // Original JSON String
	var parsedData = JSON.parse(type0);
	
	var stastus = parsedData.documnet[0].status;
	var msg = parsedData.documnet[0].msg;
	var address = parsedData.documnet[0].address[0].data1;
	var language = parsedData.documnet[0].language[0].언어;
});
</script>

```
> ❗<span style='color:green'><b><I>***설명***</I></b></span>  
> 💡 JSON 형태가 완전하면 JSP 에서 조작이 가능하다.  
> 💡 즉, JSON.parse(); 함수가 가능해진다.