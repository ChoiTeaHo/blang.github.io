---
title:  "자바 JSON 생성"
excerpt: "자바 JSON 생성 입니다."

categories:
  - java
tags:
  - [java]

toc: true
toc_sticky: true

last_modified_at: 2023-08-10T09:00:00-18:00:00
---


## 기본적인 JSON 구조
> ❗***JSON의 일반적인 구조***  
> 💡 "키": "값" 쌍으로 이루어진 객체(object)의 집합  
> 💡 "키"는 해당하는 "값"에 매핑  
> 💡 객체는 중괄호 {}로 둘러싸여 있음.  
> 💡 여러 객체를 배열로 묶을 수도 있음.  


## 키: 값
### JSON 형태
  
```json
// 기본
{
  "status":200,   // 이거 꺼내보자
  "msg":"성공",    // 이거 꺼내보자
}

```


















### 정리  
> ❗***설명***  
> 💡 2depth 형태이다.  
> 💡 비교적 간단한 형태이다. 
> 💡 위 객체로 루프 돌면서 데이터 핸들링하면 끝이다.
> 💡 이런 간단한 데이터는 따로 VO(DTO)를 사용하지 않아도 컨버트 할 필요는 없다.     




> ❗***설명***  
> 💡 아까전에는 배열 형태의 객체가 한개였지만.. 복잡하게 추가되었다.  
> 💡 복잡하고 데이터 중간에 리스트이거나 , object 형 데이터가 끼어 있으면 막막하다.  





### STEP2. 해결법: DTO 사용하기

```java
private String id;
private Object template;
private Object status;
private List<Map> fieldList;

```

```java
String strJsonStr = [제이슨데이터];

JSONParser parser = new JSON parser();
JSONObject jsonObject = (JSONObject) parser.parse(strJsonStr);

// 테스트
//System.out.println( jsonObject.get(result).toString());  //전체구조가 출력된다.

// (3depth) 배열 핸들링 시작
JSONArray jsonArray = new JSONArray(jsonObject.get("document").toString);


for (Object : docData : documents) {

//Object 형 데이터를 다시 JSONObject 로 변환해준다.

    JSONObject doc = (JSONObject) docData;

   Map insertMap = new HashMap();

//   Gson을 이용해 형변환 진행 아래 VO 는 위에 VO 작성할때의 클래스 명이다.

   Gson gson = new Gson();

   VO documentList = gson.fromJson(doc.toString() , VO.class);

insertMap.put("documentId",documentList.getId());

​

for (Map field : documentList.getFields()){

​

  log.info("필드 id 값:"+(String) field.get("id"));

  log.info("필드 type 값:"(String) field.get("type"));

  log.info("필드 value 값:"+(String) field.get("value"));

​

   }

```










## 핸들링 기본개념  
```json
{
  "status":200,
  "msg":"성공",
  "result": [
    {
      "data1" :"데이터1의 값 홍길동",
      "data2" :"데이터2의 값 홍길동주소"
    }, 
    {
      "data1" :"데이터1의 값 박명수",
      "data2" :"데이터2의 값 박명수주소"
    }, 
  ]
}

```
> ❗***위와 같은 데이터터가 있다고 가정***  
>  
> ❗***자주 사용한 라이브러리***  
> 💡 org.json 라이브러리  
> 💡 org.json.simple 라이브러리  
> 💡 gson 라이브러리  



## JSON to Array
> ❗***설명***  
> 💡 이 로직은 JSON 객체의 특정 속성이 배열로 되어 있을 때 사용  
> 💡 JSON 배열을 Java 배열로 변환하여 사용
>   
> ❗***단점***  
> 간단하고 직관적인 방법이지만, 배열의 크기 등을 직접 다루어야 하기 때문에 조금 더 수동적인 접근이 필요.  
  
만약 JSON 데이터를 간단히 다루고자 한다면 이 로직이 더 효과적  
{: .notice--info}


### CASE1. 기본
```java
import org.json.JSONArray;
import org.json.JSONObject;

public class JsonArrayToJavaArray {
    public static void main(String[] args) {
        String jsonString = "[1, 2, 3, 4, 5]";
        JSONArray jsonArray = new JSONArray(jsonString);

        // JSONArray를 Java 배열로 변환
        Integer[] javaArray = (Integer[]) jsonArray.toList().toArray(new Integer[0]);

        // Java 배열 출력
        for (Integer value : javaArray) {
            System.out.println(value);
        }
    }
}

```

> ❗***장점***  
>   
> ```java
> JSONArray jsonArray = new JSONArray(jsonString);
> ```
>    
> 💡 위 객체로 루프 돌면서 데이터 핸들링하면 끝이다.  
> 💡 이런 간단한 데이터는 따로 VO(DTO)를 사용하지 않아도 컨버트 할 필요는 없다.  
>  
> ❗***자주 사용한 라이브러리***  
> 💡 org.json 라이브러리  
> 💡 org.json.simple 라이브러







## JSON to Map
> ❗***설명***  
> 💡 이 로직은 JSON 객체를 Java Map으로 변환하는 함수를 사용  
> 💡 더 추상화된 방법으로 JSON 데이터를 다룰 수 있어 가독성 향상  
> 💡 JSON 데이터를 Map으로 변환하여 사용하면 다양한 속성에 쉽게 접근가능  
> 💡 
>  
> ❗***단점***  
> 간단하고 직관적인 방법이지만, 배열의 크기 등을 직접 다루어야 하기 때문에 조금 더 수동적인 접근이 필요.  
  
더 복잡한 구조의 JSON 데이터를 다루거나 가독성을 높이고자 한다면 두 번째 로직이 유용  
{: .notice--info}

### STEP1. 작성중
jsonToMap(jsonObject); 로직
