---
title:  "자바API HTTP 핸들링 유틸"
excerpt: "자바API HTTP 핸들링 유틸 입니다."

categories:
  - java
tags:
  - [java]

toc: true
toc_sticky: true

last_modified_at: 2023-08-18T09:00:00-18:00:00
---

## HttpUtil.java
```java
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.HttpClients;

```

### connectGET() : GET요청 후 String 얻기
```java
/*********************
 * GET 요청 후 응답결과를 String 으로 받는다.
 * 
 * @param 요청 URL주소
 * @return String
 * @throws
 *********************/
public static String connectGET(String containParamURL) 
{
  BufferedReader br = null;
  StringBuilder builder = new StringBuilder();
  HttpClient httpClient = HttpClients.createDefault();
  HttpGet get = null;

  try
  {
    get = new HttpGet(containParamURL);

    HttpResponse response = httpClient.execute(get);
    int status = response.getStatusLine().getStatusCode();

    if(status >= 200 && status <300>) 
    {
      HttpEntity entity response.getEntity();

      br = new BufferedReader(new InputStreamReader(entity.getContent()));
      String line = null;
      
      while((line = br.readLine()) != null) {
        builder.append(line);
      }
    }
  }
  finally
  {
    if(br != null) {
      br.close();
    }
    if(get != null) {
      get.releaseConnection();
    }
  }

  return builder.toString();
}

```

### isConnectURL() : URL 연결이 가능여부 확인
```java
/*********************
 * 해당 URL에 연결이 가능한지 확인한다.
 * 
 * @param 요청 URL주소
 * @return boolean
 * @throws
 *********************/
public static String isConnectURL(String connectURL) 
{  
  try
  {
    URL url = new URL(connectURL);

    HttpURLConnection connection (HttpURLConnection) url.openConnection();
    if(connection.startWith("https")) {
      connection = (HttpsURLConnection) url.openConnection();
    }
    ((HttpURLConnection)connection).setRequestMethod("HEAD");

    int responseCode = connection.getResponseCode();
    logger.info("[연결 가능합니다!.] isConnectURL("+ connectURL + ") \n ==> responseCode: " + responseCode);

    if (connection != null) {
      connection.disconnect();
    }
    if (responseCode == 503) {
      return false;
    }
    if (responseCode == HttpURLConnection.HTTP_OK) {
      return true;
    }
  }
  catch (MalformedURLException e)
  {
    logger.info("isConnectURL("+ connectURL + ") \n ==> MalformedURLException: " + e.toString());
    return false;
  }
  catch (ConnectException e)
  {
    logger.info("isConnectURL("+ connectURL + ") \n ==> ConnectException: " + e.toString());
    return false;
  }
  catch (IOException e)
  {
    logger.info("isConnectURL("+ connectURL + ") \n ==> IOException: " + e.toString());
  }

  return true;
}

```
