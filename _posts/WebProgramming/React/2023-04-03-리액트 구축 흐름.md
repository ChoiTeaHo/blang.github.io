---
title:  "리액트 구축 흐름"
excerpt: "리액트 구축 흐름 입니다."

categories:
  - react
tags:
  - [react]

toc: true
toc_sticky: true

last_modified_at: 2023-04-03T20:00:00-05:00
---

## 리액트 구축 흐름
1. client랑 server 개발 방법은?

2. client랑 server 개발 후 실행 방법은?

3. client 산출물을 server로 전송하는 방법은?

4. git 저장소에 코드 업로드

## STEP1. client랑 server 개발 방법은?
- <span style="color:green"><b>client 개발</b></span>  
    : client를 개발하는 방법은 react를 학습중이므로 설명못하겠다.. 현재는 create-react-app 후 개발용으로 react를 설치하고 실행 테스트하고 있다.

- <span style="color:green"><b>server 개발</b></span>  
    : node.js 또는 spring 등이 있을 것이다. 이전에 완성한 node.js 를 서버로 개발 진행한다면 다음과 같다.

    - Node.js  
      ```bash
      # 디렉토리 1depth 만 표현 :)
        tree
        . 
        ├── app.js
        ├── config
        ├── controllers
        ├── middlewares
        ├── models
        ├── node_modules
        ├── package-lock.json
        ├── package.json
        ├── public
        ├── routes
        └── server.js
        
        ```

## client랑 server 개발 후 실행 방법은?
### CASE1. 각각의 서버실행으로 운영하기 
순서는 다음과 같다.  

1. build 시키지 않고, 
2. client 서버를 실행한다. (3000)
    ```bash
    npm start

    ```
3. server 서버를 실행한다. (3001)
    ```bash
    # node server.js
    # npm prod start
    npm dev start

    ```

<span style="color:red"><b>각각의 서버를 띄우는 가장 간단한 방법</b></span>이다.  
client의 서버에서는 내부 코드가 변경분이 일어나면 client 서버만 자동으로 컴파일이 빠르게 가능하다. 그리고 server측은 바로 client 서버의 자원을 바라보면된다. 
  
즉, 서버측에서 클라이언트 자원을 build 하고 server의 서버를 재기동 할 필요도 없다.
  
각각의 서버가 아닌 1대의 서버에서 클라이언트 자원까지 관리한다면 build 하고 빌드 결과를 서버측에 로드하고 실행 및 확인해야하고, nodemo(노드몬)패키지로 server를 자동 재시작 한다고 해도 서버자체를 재시작 해주어야 한다.
  
아직 내가 사용해본건 간단한 Node 프로젝트 학습용이라 server는 실행시키는 것은 순식간에 되므로 그렇게 번거롭지도 않지만..   
{: .notice--info}

> <span style="color:blue"><b><I>개발 중일 때에는 이 방법으로 편리하게 client & server를 실행시킨다.</I></b></span>


### CASE2. 클라이언트 빌드한 리소스를 서버에서 참조 운영하기
순서는 다음과 같다.  

1. client를 build
    ```bash
    npm build

    ```
2. server에서 client의 build/index.html을 참조한다.


### CASE3. client 산출물을 server로 전송하는 방법은?
```bash
# 클라이언트 측
npm build

```
```js
// 서버측 (server.js 전에 포스팅한 node.js 메인파일이다.)
app.use(express.static(path.join(__dirname, "/client/build")));

```

<span style="color:red"><b>client 자원 빌드하고 서버측에 올리면 끝이다.</b></span>  
client 개발이 끝나면, npm run build를 통해 하나의 build 폴더를 만들고, server에서 client의 build/index.html 파일을 참조(라우팅)하는 방식으로 로드할 수 있다.


### CASE4. git 저장소에 코드 업로드
server와 client 모두 개발했기 때문에 둘 모두를 업로드해야 한다.

- client   
    : `npm run build` 를 통해 build 된 폴더만 옮기면 된다. git 업로드를 위한 폴더를 구성한다.

- server
    : build 필요없이 그 자체로 옮겨준다.

이후 다음과 같다.
  
```bash
git init
git remote add origin <미리 받아놓은 저장소 주소>

git add *
git commit -m "first commit"
git push origin master

```

1. 버전관리폴더 초기화(.git 파일 생성)
2. 저장소 주소로 remote 설정
3. 모든 파일들을 올리기.

> [참고링크](https://velog.io/@peration/React-server-client-%EA%B0%9C%EB%B0%9C#1-client%EC%99%80-server%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%EA%B0%9C%EB%B0%9C%ED%95%98%EC%A7%80)  
> 참고로 여기서 gitignore로 숨길 파일이 전혀 없다.  
> 모든 파일을 다올려야 한다. (.env, /node_modules, packages.json 등등)
> (다시 적용해보니 /node_modules는 굳이 올리지 않아도 알아서 install 하는 것 같다. 고로 올리지 않아도 된다.)
> 그래야 server에서 인식하기 때문이다.  
