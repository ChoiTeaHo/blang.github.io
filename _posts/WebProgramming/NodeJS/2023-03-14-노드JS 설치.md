---
title:  "노드JS 설치"
excerpt: "노드JS 설치 입니다."

categories:
  - nodejs
tags:
  - [node.js]

toc: true
toc_sticky: true

last_modified_at: 2023-03-14T20:00:00-05:00
---

## 폐쇄망에서 설치 (for Windows)
: 인터넷이 안되는 내부 환경에서 설치한다

**참고한 블로그 링크)**  
[https://doitnow-man.tistory.com/161](https://doitnow-man.tistory.com/161)
{: .notice--info}


## 모듈에 대하여
: 설치에 앞서 모듈에 대하여 설명한다.

### node.js 모듈 종류
- Core 모듈
    - node.js 에서 기본적으로 제공하는 모듈
    - require("module").builtinModules 로 확인 가능하다.
    
- third party 모듈
    - npm(Node Packaged Modules)으로 설치한 모듈(<span style="color:red"><b>node_modules 폴더 아래 설치된다.</b></span>)
    - 종류는 너무 많아 (https://www.npmjs.com/) 여기서 찾는게 좋다.
     
- local 모듈
    - 사용자가 만든 모듈

### node.js 모듈 관리
- node.js에서 모듈관리는 **npm(Node package manager)**를 통해서 이루어진다.
- npm은 통해서 설치, 업데이트, 삭제 ,프로젝트의 의존성을 관리 할 수 있다.
- npm으로 모듈을 관리 하기 위해서는 생성한 프로젝트에서 **npm init**을 해주면 된다.
- npm init을 한곳이 한개의 프로젝트라고 보면 된다.
  
> 1. npm init -y 간편 설정  
>     - 모든 것을 Default로 설정  
> 2. npm init  
>     - 모든 것을 수동으로 설정  
> 3. npm init 후 만들어진 npm의 의존성을 관리하는 파일(package.json)  
>      - npm으로 <span style="color:red"><b>install</b></span> 또는 <span style="color:red"><b>uninstall</b></span> 할때 마다 모듈이 <span style="color:red"><b>dependencies</b></span> 에 추가 되거나 삭제가 된다.  


### node.js 모듈 설치 방법

- Core 모듈
    - 기본적으로 node.js 에서 제공하기에 설치가 필요 없습니다.

- third party 모듈
    - node.js 에서 모듈 관리는 npm을 통해서 이루어 집니다.
    - npm을 통해서 설치, 업데이트, 삭제 를 할 수 있습니다.
      
        ```bash
        # (1) 설치 
        ## A. global 설치
        ## - 모든 프로젝트에서 사용 가능합니다.
        npm install -g [모듈명]

        ## B. local 설치
        ## - 설치되는 위치는 프로젝트 하위의 node_modules에 설치가 됩니다.
        ## - 설치된 프로젝트에서만 사용 가능합니다 
        npm install [모듈명]
        
        # (2) 삭제 
	      npm uninstall [모듈명]

        # (3) 업데이트 
	      npm update [모듈명]

        # (4) 검색
	      npm search [모듈명]
        
        ```
        
- local 모듈
    - local 모듈을 만들어 주어야한다.
    - 사용자가 만든것이기 때문에 설치 할 필요가 없다.

### node.js 모듈 설치경로

- Core 모듈
    - 내장 모듈이다.

- third party 모듈

  1. global 설치 위치  
  
      ```bash
      C:\Users\mt01301\AppData\Roaming\npm\node_modules
      
      ```
      
  2. third party 모듈
      
      1. global 설치 위치  
          
          ```
          C:\Users\mt01301\AppData\Roaming\npm\node_modules
          
          ```
          
      2. local 설치 위치
          - 현재 프로젝트하위의 node_modules 에 설치가 된다.  
  
  3. local 모듈  
      - 사용자가 만든것 이기 때문에 지정하기 나름이다.  
  
  
### node.js 모듈을 사용법
    
```bash
require("core모듈명")

```


### node.js 에서 모듈을 검색하는 순서
> ***모듈을 생성했는데 모듈을 찾지 못 할 경우 node.js에서 어떤 순서로 모듈을 찾는지 알 필요가 있다.***

- global 모듈 검색 위치
  - cmd 에서 아래 명령어로 확인가능
   
      ```
      npm -g root
      C:\Users\mt01301\AppData\Roaming\npm\node_modules  
      
      ```

- third party 모듈 또는 local 모듈 검색 위치
  - cmd에서 아래 명령어로 확인 가능
  - 현재 경로에서 하단계씩 올라가면서 node_modules를 찾는다.
  
       ```
       node -e "console.log(global.module.paths)"  
       [ 
         'C:\\User\\MT01301\\node_modules', 
         'C:\\User\\node_modules',
         'C:\\node_modules'
       ]
       
       ```


## 모듈에 대하여(local모듈:사용자 모듈) 추가내용

> ***local 모듈이란?***  
> 사용자가 코드관리는 위해 기능적으로 코드를 분리한 코드를 모듈이라고 한다.

### 생성하기
- <span style="color:red"><b>node.js에서 모듈은 파일 하나를 의미</b></span> 합니다.
- <span style="color:red"><b>모듈 파일에서 exports 객체에 메소드 및 프로퍼티를 추가 하면 해당 파일은 모듈로써 사용</b></span>하겠다는 의미 입니다.

    ```bash
    exports.module_name = 'test_module.js'  //

    exports.abs = function(number) {
        if (0 < number) {
            return number;
            } else {
            return -number;
        }
    };
    
    exports.circleArea = function (radius) {
        return radius * radius * Math.PI;
    }
    
    ```    
    
    
### 실전 사용법
- <span style="color:red"><b>require('모듈파일명')를 통하여 모듈을 로드 하여 사용</b></span> 가능 합니다.

    ```bash
    # 상기 모듈코드에서 만든 메소드(abs, circleArea), 프로퍼티(module_name)을 사용한 에제 입니다 
    var module = require('./module.js');
    
    console.log(module.abs(1));
    console.log(module.circleArea(1));
    console.log(module.module_name)
    
    # 결과 
    PS D:\jk_nodejs> node .\node_test.js
    1
    3.141592653589793
    test_module.js
      
    ```

## 삭제
: 삭제 방법부터 소개한다.

1. Node.js 패키지와 npm패키지를 삭제
    ```bash
    $ sudo apt-get remove nodejs
    $ sudo apt-get remove npm
    
    ```

2. 이제 Node.js와 npm 패키지를 완전히 제거하기 위해, 관련된 설정 파일과 의존성 패키지를 모두 삭제
    ```bash
    $ sudo apt-get purge nodejs npm
    
    ```
    
4. 마지막으로, 더 이상 필요하지 않은 패키지와 의존성을 자동으로 제거.
    ```bash
    $ sudo apt-get autoremove
    
    ```

## 설치
### Node.js 설치

> 공식홈페이지: [https://nodejs.org/en/](https://nodejs.org/en/)

1. 패키지 최신화  
    ```bash
    $ apt-get update
    $ apt-get upgrade
    
    ```

2. 설치전 패키지버전 확인  
    ```bash
    $ apt list | grep nodejs
    
    WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

    netdata-plugins-nodejs/oldstable 1.12.0-1+deb10u1 all
    nodejs-doc/oldstable,now 10.24.0~dfsg-1~deb10u3 all [installed,automatic]
    nodejs/oldstable,now 10.24.0~dfsg-1~deb10u3 armhf [installed]    
    
    ```
    
    패키지 자동설치 명령어는 너무 구버전을 설치한다. 실제로 아래와 같이 저장소에 버전을 확인해보면 너무 낮다. 노드JS의 패키지 저장소를 최신으로 변경시킨다. (주소 뒤에 숫자는 버전이다.)  
    참고로 최신 버전은 기능이 불안정하거나 일부 모듈(패키지)이 작동하지 않을 수 있으므로 안정성을 보장하고 싶으면 LTS 버전을 사용하는 게 좋다.  
      
      최신버전링크: [https://nodejs.org/en](https://nodejs.org/en)  
      - 2023년 2월 16일 기준 19.6.1, LTS 버전은 18.14.0
      - 2023년 3월 20일 기준 19.8.1, LTS 버전은 18.15.0 
      {: .notice--info}


    ```bash
    # 최신 NodeJS 패키지 저장소로 변경 (18으로 입력)
    $ curl -sL https://deb.nodesource.com/setup_18.x | sudo -E bash -
    
    # 최신인 18버전을 보고있다.
    $ apt list | grep nodejs
    
    WARNING: apt does not have a stable CLI interface. Use with caution in scripts.
    
    netdata-plugins-nodejs/oldstable 1.12.0-1+deb10u1 all
    nodejs-doc/oldstable 10.24.0~dfsg-1~deb10u3 all
    nodejs/unknown 18.15.0-deb-1nodesource1 armhf
        
    ```

    설치한다. 
    
    ```bash
    # 설치
    $ apt-get install nodejs
    
    # 최신버전 정상 설치
    $ node -v
    v18.15.0
    
    $ npm -v
    9.5.0
    
    # 윈도우OS 이라면? .msi 확장자로 설치하면 된다.
    
    ```


    ***잠깐!***  
    Node.js를 설치하면 NPM(Node Package Manager) 도 함께 설치되어진다.
    {: .notice--info}



## 테스트
### Node.js 테스트

```bash
$ mkdir 노드JS연습디렉토리
$ cd 노드JS연습디렉토리

# JS파일 생성
$ touch main.js

```

```js
// main.js 작성
function sum(a,b) {
    return a + b;
}

console.log('sum = '+ sum(1,2)); 

```

```bash
# 이렇게 미리 생성된 JavaScript 파일을 우리는 node명령어를 통해 실행할 수가 있다.
$ node main.js 
sum = 3      # JS가 실행되었다.

```

### NPM 테스트
```bash
$ cd 노드JS연습디렉토리
$ npm init -y

## dir 명령어로 확인해보면 아래 파일이 생성되었다
$ ls
package.json  

```

**package.json**  
```json
{
  "name": "nodestudy",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"                                                                                        }
}

```
  
  
***package.json 이란?***  
`package.json`은 프로젝트에 대한 명세라고 할 수 있다.  
해당 프로젝트의 이름, 버전, 사용되는 모듈 등의 스펙이 정해져 있으며, 
이 `package.json`을 통해 모듈 의존성 모듈 관리도 진행할 수 있다.
만약 어떤 오픈 소스를 다운 받을 때 이 `package.json`만 있다면 해당 오픈 소스가 의존하고 있는 모듈이 어떤 것인지.  
그리고 그 모듈들을  <span style="color:red"><b>npm install</b></span> 명령어로 한 번에 설치할 수 있다.
{: .notice--info}

```bash
# 생성된 내용은 다음과 같다.
$ vi package.json

{
  "description": ""
}

```

이제 NPM 기능으로 모듈을 설치가 되는지 테스트해보자.

```bash
$ npm install express

added 57 packages, and audited 58 packages in 5s

7 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
npm notice
npm notice New minor version of npm available! 9.5.0 -> 9.6.2
npm notice Changelog: https://github.com/npm/cli/releases/tag/v9.6.2
npm notice Run npm install -g npm@9.6.2 to update!
npm notice

```
  
설치를 완료했다. 정상인지 확인해보자.  
  
```bash
$ npm list
nodestudy@1.0.0 /fswas/wasadm/nodeStudy
└── express@4.18.2

```
  
디렉토리는 아래와 같이 새로운 폴더들이 생성된다.  
Express 패키지가 설치되면 프로젝트 폴더에 node_modules라는 폴더가 생성되며, 자동으로 express 패키지
가 참조하고 있는 다른 npm 패키지들이 설치되는 것이다. (패키지 의존성이라 부른다.)  
  
```bash
$ ls -al
합계 40
drwxr-xr-x  3 wasadm wasadm  4096  3월 20 17:25 .
drwxr-xr-x  6 wasadm wasadm  4096  3월 20 17:13 ..
drwxr-xr-x 59 root   root    4096  3월 20 17:25 node_modules  #생성!
-rw-r--r--  1 root   root   21864  3월 20 17:25 package-lock.json #생성!
-rw-r--r--  1 root   root     273  3월 20 17:25 package.json

```

실제로 node_modules 안에는 의존하는 수많은 패키지들이 설치되어져 있다.  

> ***내부망(폐쇄망) 환경이라면?***  
> 외부에서 미리 node_modules 를 구축하고 내부로 들고 온다. 그리고 루트 폴더에 넣어주면 사용가능하다.
  
  
### NPM 실행하기 

```bash
npm run start  # 에러가 발생한다.

```




