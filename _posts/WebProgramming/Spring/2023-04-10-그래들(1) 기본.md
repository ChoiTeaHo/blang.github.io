---
title:  "그래들(1) 기본"
excerpt: "그래들(1) 기본 입니다."

categories:
  - spring
tags:
  - [spring, 프레임워크]

toc: true
toc_sticky: true

last_modified_at: 2023-02-10T13:17:00-17:00
---

## 그래들(Gradle)
### 요약
: Maven은 프로젝트에서 필요한 라이브러리를 중앙레파지토리에서 자동으로 가져오므로, 이클립스에서 따로 라이브러리를 추가할 필요가 없다. 아래는 junit을 추가한 예제이다. 이와 같이 추가만 해주면 자동으로 라이브러리가 추가된다.
  
```xml
<dependencies>
  <dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.13.1</version>
    <scope>test</scope>
  </dependency>
</dependencies>

```

## 그래들(Gradle) 설치
- gradle Download
- groovy Download
- 각 설치 파일 압축 해제
- 환경 변수 또는 path 등록

### 설치
1. 그래들 홈페이지[https://gradle.org/](https://gradle.org/) 에서 OS에 맞도록 설치
2. 제어판 > 시스템 > 고급 시스템 설정 > 환경변수 - 시스템변수(새로만들기) 클릭
3. 그래들홈(GADLE_HOME) 설정
    - ex) C:\Users\MT01301\.gradle\wrapper\dists\gradle-7.6-bin\9l9tetv7ltxvx3i8an4pb86ye\gradle-7.6
4. 패스(GRADLE_HOME + /bin) 설정
    - ex) C:\Users\MT01301\.gradle\wrapper\dists\gradle-7.6-bin\9l9tetv7ltxvx3i8an4pb86ye\gradle-7.6\bin
5. 완료
    ```bash
    gradle -v   # 정상이면 정보가 출력된다
    
    ```

## 기본 그래들(Gradle) 사용법
### STEP1. 어플리케이션 생성

```bash 
# Gradle 프로젝트를 생성할 폴더 생성
mkdir gradle-study

```
  
. init 옵션을 통해서 project 기본 파일과 폴더를 생성한다
  
```bash
# gradle init --type java-application 한번에 자바프로젝트 생성 진행하는 방법

gradle init

Select type of project to generate:
  1: basic
  2: application
  3: library
  4: Gradle plugin
Enter selection (default: basic) [1..4] 2

```

> basic: 기본 프로젝트 타입, 수동으로 구성해야 함  
> application: java application 타입, App.java 파일을 포함  
> library: java library 타입, Library.java 파일을 포함  
> Gradle plugin: java로 구현 된 gradle 플러그인 타입  


### STEP2. 프로젝트 언어 설정

```bash
Select implementation language:
  1: C++
  2: Groovy
  3: Java
  4: Kotlin
  5: Swift
Enter selection (default: Java) [1..5] 3

```

### STEP3.싱글모듈, 멀티모듈 프로젝트 설정

```bash
Split functionality across multiple subprojects?:
1: no - only one application project
2: yes - application and library projects
Enter selection (default: no - only one application project) [1.. 2] 1

```
    
### STEP4. DSL 설정(Gradle 스크립트를 작성할 언어)

```bash
Select build script DSL:
  1: Groovy
  2: Kotlin
Enter selection (default: Groovy) [1..2] 1

# 이후 새로운 API 를 사용해서 build 를 생성하겠냐는 질문에 기본 값을 선택. (새로운 API 가 어떤 변경이 있는지 잘 모름..)
Generate build using new APIs and behavior (some features may change in the next minor release)? (default: no) [yes, no]no

```

### STEP5. 테스트 프레임워크 선택

```bash
# 익숙한 JUnit 4 선택한다.
Select test framework:
  1: JUnit 4
  2: TestNG
  3: Spock
  4: JUnit Jupiter
Enter selection (default: JUnit 4) [1..4] 1

```

이후 프로젝트 이름 설정이 나오는데 이 부분은 생략한다.  
  
### STEP6. 실행
: Project를 실행하기 위해 gradle run 을 수행한다. 예상 결과는 다음과 같다.

1. gradle run 명령어 입력
2. gradle-study\app\src\main\java\gradle\study\App.java 자바파일 실행
3. "Hello Java" 수행

```bash
gradle run   # 폐쇄망에서 에러 발생

```
  
폐쇄망에서는 gradle 을 통해 레파지토리에서 받지 못하도록 해야하므로 아래 빌드 내용을 지워준다
  
```bash
cd gradle-study\app\
vi bulid.gradle

dpendencies {
    // 외부를 참조하는 implementation 항목을 제거
}

```
  
재시도 하면 정상작동 하는 것을 확인할 수 있다.
  
```bash
gradle run

> Task :app:run
Hello World!

BUILD SUCCESSFUL in 4s
2 actionable tasks: 2 executed
<-------------> 0% WAITING
> IDLE

```


## 이클립스에서 그래들(Gradle) 사용법  
### (작성중)


## 그래들(Gradle)에서 로컬레파지토리 사용하기(메이븐 활용편)
### (작성중)
[링크1](https://velog.io/@haerong22/Gradle-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC-%EB%A7%8C%EB%93%A4%EA%B3%A0-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0Maven-Local-Repository)  
[링크2](https://jx2lee.github.io/grade-publish-local-maven-repository-and-use-it/)  
[링크3](https://zkdlu.github.io/2022-02-17/Gradle-%EB%A1%9C%EC%BB%AC-Repository/)







## 그래들(Gradle) 프로젝트 패키징 방법(jar파일)


### jar파일 패키징 생성
```bash
gradle jar
BUILD SUCCESSFUL in 3s
2 actionable tasks: 1 executed, 1 up-to-date

```

***build/libs/app.jar 이 경로에 jar 파일이 생성된다.***  

### jar 패키징 실행
```bash
java -jar build\libs\app.jar
build\libs\app.jar에 기본 Manifest 속성이 없습니다.

```

Manifest 속성을 아래와 같이 선언해주자.

### (에러시)Manifest 속성 선언
```bash
cd gradle-study\app\
vi bulid.gradle

jar {
    manifest {
        attributes 'Main-Class': 'gradle.study.App' 
    }
}

```

```bash
# 재시도 한다.

# 정리 
$ gradle clean
BUILD SUCCESSFUL in 3s
1 actionable task: 1 executed
--------------------------------------------------------------
# 패키징 
$ gradle jar
BUILD SUCCESSFUL in 3s
2 actionable tasks: 1 executed, 1 up-to-date
--------------------------------------------------------------
# 실행
$ java -jar build\libs\myfirst-app.jar
Hello world!

```
  
> 지금까지 그래들(Gradle) 사용방법을 알아보았다.
  
  

## 설치 후 디폴트 Gradle 소스코드 정리
: 최소한의 Gradle 소스코드는 다음을 참고하면 된다.

```xml
plugins {
	id 'java'   <!-- 사용하는 언어 -->
	id 'org.springframework.boot' version '3.0.2'  <!-- 프로젝트의 스프링부트 프레임워크의 버전설정 -->
	id 'io.spring.dependency-management' version '1.1.0'  <!-- 프로젝트에 필요한 라이브러리를 관리해주는 툴(매니지먼트)의버전 -->
}

group = 'com.god'  <!-- 프로젝트정보 -->
version = '0.0.1-SNAPSHOT'  <!-- 첫번째 자리 : 메이저 업데이트, 두번째 자리 : 마이너업데이트, 세번째 자리 : fix버전(오탈자, 이미지 변경) -->
sourceCompatibility = '17'  <!-- 자바버전 -->

<!-- dependencies 라이브러리를 다운받은 사이트 -->
repositories {
	mavenCentral()
}

<!-- dependencies-추가하고자 하는 라이브러리를 편리하게 넣을 수 있다. -->
dependencies {

  <!-- compile : 자바코드를 실행가능한 바이트 코드로 변경 (바이트코드를 실행하면 컴퓨터는 인식하고 실행) -->
  compileOnly 'org.projectlombok:lombok'  <!--롬복: 도메인(class)이 가져야할 getter, setter, builder등을 자동으로 코드생성 (@어노테이션) (단,컴파일에서만!) -->
	annotationProcessor 'org.projectlombok:lombok:'

	implementation 'org.springframework.boot:spring-boot-starter-web'  <!-- Spring MVC를 사용한 RESTful서비스를 개발하는데 사용. -->
	testImplementation 'org.springframework.boot:spring-boot-starter-test'  <!-- JUnit 전용 -->
}

tasks.named('test') {
	useJUnitPlatform()
}

```

## 이클립스에서 Gradle 사용법  
> 참고) [https://javacan.tistory.com/entry/import-maven-project](https://javacan.tistory.com/entry/import-maven-project)
### 이클립스 설정
: 이클립스 또는 STS 에서 사용하려면 아래 내용을 설정한다.

1. IDE 실행
2. 그래들경로 설정 Window - Preferences - Gradle - Local installation directory 클릭
    - 그래들(Gradle) 설치경로(GRADLE_HOME)를 지정해준다. (bin 경로아님)
3. 자바경로 설정
    - 자바(JDK) 설치경로(JAVA_HOME)를 지정해준다. (bin 경로아님)

### 이클립스 Gradle Project 임포트
1. File - Import - Existing Gradle Project - (위에서 디폴트설정했으므로 계속 NEXT)
2. 완료

### 이클립스 스프링부트 Gradle Poject 시작 설정
: <span style="color:red"><b>그래들(Gradle)로 개발되어 있는 프로젝트는 Build 관련 옵션을 gradle 으로 꼭 설정해야한다.</b></span>

1. 실행파일 App.java 우클릭 - Run Configurations - 스프링부트TAB
    - Profile 콤보박스에서 local 선택 (나는 로컬환경이므로 참조를 로컬로 셋팅했다.)
2. 실행 App.java 우클릭 - Run Configurations - 아규먼트TAB
    - Program arguments 박스에서 "start" 입력
    - VM arguments 박스에서 "-Dspring.profiles.active=local" 입력
3. 설정 완료
4. 실행파일 App.java 우클릭 - Run As - Spring Boot App 클릭
5. 정상 실행..!


